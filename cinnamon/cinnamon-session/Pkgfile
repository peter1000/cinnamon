# Description: The Cinnamon Session Handler.
# URL: http://cinnamon.linuxmint.com/
# Maintainer: https://github.com/linuxmint
# Packager: fanch at orange do fr thierryn1 at hispeed dot ch
# Depends on: dbus-glib cinnamon-desktop xorg-libsm libcanberra

name=cinnamon-session
version=2.6.3
release=1
source=(timeout.patch)
_gitroot=https://github.com/linuxmint/cinnamon-session.git
_gitname=cinnamon-session

build() {
	cd $SRC
	
	if [[ -d $_gitname ]]; then
		cd $_gitname && git pull origin
	else
		git clone $_gitroot $_gitname
	fi


	rm -rf $SRC/$_gitname-build
	git clone $SRC/$_gitname $SRC/$_gitname-build
	cd $SRC/$_gitname-build
	
	 patch -Np1 -i ../timeout.patch
	 
  ./autogen.sh  --prefix=/usr \
				--sysconfdir=/etc \
				--localstatedir=/var \
				--libexecdir=/usr/lib/cinnamon-session \
				--disable-schemas-compile \
				--enable-systemd \
				--disable-gconf
    make 
	
    make DESTDIR=$PKG install
}
