# Description: Library with common API for various Cinnamon modules.
# URL: http://cinnamon.linuxmint.com/
# Maintainer: https://github.com/linuxmint
# Packager: fanch at orange do fr thierryn1 at hispeed dot ch
# Depends on: xorg-xkeyboard-config gnome-common cjs gtk3 xorg-libxkbfile python glib


name=cinnamon-desktop
version=2.6.5
release=2
source=(https://github.com/linuxmint/${name}/archive/${version}.tar.gz
	gnome-3.14.patch)
build() {
  cd $name-$version
	
  # Some fixes for GNOME 3.14
  patch -Np1 -i ../gnome-3.14.patch

  # Arch uses systemd
  sed -i 's|false|true|g' schemas/org.cinnamon.desktop.session.gschema.xml.in.in
  # Fix build failure 
  sed -i 's|subdir-objects||g' configure.ac
 
   ./autogen.sh || true
   ./configure --prefix=/usr \
   --sysconfdir=/etc \
   --localstatedir=/var \
    --libexecdir=/usr/lib/$name \
    --disable-static
    make 
	
    make DESTDIR=$PKG install
}
